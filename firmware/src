/* 
  Sketch generated by the Arduino IoT Cloud Thing "SmartHome"
  https://create.arduino.cc/cloud/things/fbb1357e-439b-4cc4-9380-522cd35294fa 

  Arduino IoT Cloud Variables description

  The following variables are automatically generated and updated when changes are made to the Thing

  int lED_Colour;
  bool lED_on;

  Variables which are marked as READ/WRITE in the Cloud Thing will also have functions
  which are called when their values are changed from the Dashboard.
  These functions are generated with the Thing and added at the end of this sketch.
*/

#include "thingProperties.h"

#include <IRremote.hpp>  // Make sure to install IRremote 4.x or newer
#define IR_SEND_PIN 3

void setup() {
  Serial.begin(115200);
  Serial.println(F("Ready to blast LED strip codes"));
  IrSender.begin(IR_SEND_PIN, ENABLE_LED_FEEDBACK, 2);
  initProperties();
  ArduinoCloud.begin(ArduinoIoTPreferredConnection);
}

void loop() {
ArduinoCloud.update();
  delay(10);
}


/*
  Since LEDOn is READ_WRITE variable, onLEDOnChange() is
  executed every time a new value is received from IoT Cloud.
*/
void onLEDOnChange()  {
  if (lED_on)
  {
    IrSender.sendNEC(0xEF00, 0x3, 0); 
    //delay(1000);
  }
  else {
    IrSender.sendNEC(0xEF00, 0x2, 0); 
    //delay(1000);
  }
}


/*
  Since LEDColour is READ_WRITE variable, onLEDColourChange() is
  executed every time a new value is received from IoT Cloud.
*/
void onLEDColourChange()  {
  Serial.println(F("Sending NEC code..."));
  IrSender.sendNEC(0xEF00, lED_Colour, 0);  //  LED strip command
  //delay(1000);
}



